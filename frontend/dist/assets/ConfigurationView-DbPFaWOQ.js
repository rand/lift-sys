import{r as i,j as e}from"./vendor-react-Cn3fHe9B.js";import{u as b}from"./vendor-query-CJnMiGqQ.js";import{C as u,a as x,b as j,c as f,d as P,B as S,A as v,e as g,S as w,f as A}from"./index-CJ6qQG_v.js";import{L as y}from"./label-BksH9l-u.js";import{I as N}from"./input-C7qxALES.js";import{e as k}from"./vendor-icons-CuxTy89m.js";import"./vendor-radix-ODPEYl-B.js";import"./vendor-utils-DARsLm--.js";function F({onSelect:n}){const[d,o]=i.useState([]),[p,c]=i.useState(),[h,r]=i.useState(!1);i.useEffect(()=>{m()},[]);const m=async()=>{r(!0);try{const s=await fetch("/api/providers");if(!s.ok)throw new Error("Failed to fetch providers");const l=await s.json();o(l.map(t=>({type:t.type,authenticated:t.authenticated??!1,capabilities:t.capabilities,status:t.status??"healthy",expiresAt:t.expiresAt})))}catch(s){console.error("Failed to load providers",s)}finally{r(!1)}},a=async s=>{const l=await fetch(`/api/auth/${s}/initiate`,{method:"POST"});if(!l.ok){console.error("Failed to initiate OAuth");return}const t=await l.json();t.authUrl&&(window.location.href=t.authUrl)},C=s=>{c(s),n==null||n(s)};return e.jsxs("div",{className:"provider-selector",children:[e.jsx("div",{className:"provider-list",children:d.map(s=>e.jsxs("div",{className:`provider-card ${p===s.type?"selected":""}`,children:[e.jsxs("div",{className:"provider-header",children:[e.jsx("span",{className:"provider-name",children:s.type.toUpperCase()}),e.jsx("span",{className:`provider-status ${s.status}`,children:s.status})]}),e.jsxs("div",{className:"provider-capabilities",children:[s.capabilities.streaming&&e.jsx("span",{className:"badge",children:"Streaming"}),s.capabilities.structuredOutput&&e.jsx("span",{className:"badge",children:"Structured"}),s.capabilities.reasoning&&e.jsx("span",{className:"badge",children:"Reasoning"})]}),s.expiresAt&&e.jsxs("div",{className:"provider-expiry",children:["Token expires ",s.expiresAt]}),e.jsxs("div",{className:"provider-actions",children:[e.jsx("button",{onClick:()=>C(s.type),children:"Use provider"}),!s.authenticated&&e.jsx("button",{onClick:()=>a(s.type),children:"Connect"})]})]},s.type))}),h&&e.jsx("div",{className:"loading",children:"Loading providersâ€¦"})]})}function $(){const[n,d]=i.useState("http://localhost:8001"),[o,p]=i.useState(0),[c,h]=i.useState(null),r=b({mutationFn:async()=>{await A.post("/api/config",{model_endpoint:n,temperature:o})}}),m=i.useCallback(async a=>{h(a),await fetch("/api/providers/primary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:a})})},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Configuration"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure model endpoints and AI provider settings"})]}),e.jsxs(u,{children:[e.jsx(x,{children:e.jsx(j,{children:"Model Configuration"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"endpoint",children:"Model Endpoint"}),e.jsx(N,{id:"endpoint",type:"url",value:n,onChange:a=>d(a.target.value),placeholder:"http://localhost:8001"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"URL for the local or remote model API endpoint"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"temperature",children:"Temperature"}),e.jsx(N,{id:"temperature",type:"number",step:"0.1",min:"0",max:"2",value:o,onChange:a=>p(Number(a.target.value))}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Controls randomness: 0 is deterministic, higher values increase creativity"})]})]}),e.jsxs(P,{className:"flex gap-3",children:[e.jsx(S,{onClick:()=>r.mutate(),disabled:r.isPending,children:r.isPending?"Saving...":"Save Configuration"}),r.isSuccess&&e.jsxs(v,{className:"flex-1",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(g,{children:"Configuration saved successfully"})]})]})]}),e.jsx(w,{}),e.jsxs(u,{children:[e.jsx(x,{children:e.jsx(j,{children:"AI Providers"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsx(F,{onSelect:m}),c&&e.jsx(v,{variant:"success",className:"mt-4",children:e.jsxs(g,{children:["Primary provider: ",e.jsx("span",{className:"font-semibold",children:c.toUpperCase()})]})})]})]})]})}export{$ as ConfigurationView};
